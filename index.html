<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DVS Setup Wizard – Easy Steps (NZ)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
  <style>
    html, body { touch-action: manipulation; }
    body { font-family: 'Segoe UI', Arial, sans-serif; background: #f4f7fb; margin: 0; padding: 0;}
    .container { max-width: 440px; margin: 0 auto; background: #fff; border-radius: 18px; box-shadow: 0 2px 20px #2d415a19; padding: 24px 6vw 18px 6vw; margin-top: 28px;}
    h1 { text-align: center; color: #154b6d; font-size: 1.13em; margin-bottom: 15px;}
    .infobox {
      background: #e5f4ff;
      border-left: 5px solid #2ca6db;
      color: #15597b;
      padding: 13px 12px 13px 16px;
      border-radius: 8px;
      margin-bottom: 18px;
      font-size: 1.03em;
      box-shadow: 0 2px 8px #c8e2f425;
    }
    .wizardselect {
      margin-bottom: 18px;
      text-align: center;
    }
    .season-btns { display: flex; flex-direction: column; gap: 18px; margin: 18px 0;}
    .season-btn {
      display: flex; align-items: center; justify-content: center;
      font-size: 1.15em; font-weight: bold;
      padding: 17px 0; border-radius: 14px;
      border: none; cursor: pointer; transition: box-shadow 0.2s, background 0.2s;
      box-shadow: 0 2px 10px #b0c4d711;
      background: #e8f1fa;
      color: #105478;
    }
    .season-btn.active, .season-btn:focus { background: #cbefff; box-shadow: 0 2px 16px #92ccf6b5; outline: none;}
    .season-btn.recommended { border: 2.5px solid #1798bc; background: #d4f4ff;}
    .wiz-btn {
      font-size: 1.07em; font-weight: bold; padding: 13px 30px;
      border-radius: 11px; border: none;
      background: #e0f5fb; color: #115473; cursor: pointer;
      box-shadow: 0 1px 8px #b7d2df1a; margin: 20px auto 0 auto;
      display: inline-block;
      transition: background 0.18s;
    }
    .wiz-btn:active, .wiz-btn:focus { background: #bfe8f9;}
    .fanbox {
      background: #e8f8e2;
      border-left: 5px solid #1abe63;
      color: #197844;
      padding: 13px 12px 13px 16px;
      border-radius: 8px;
      margin-bottom: 18px;
      font-size: 1.07em;
      box-shadow: 0 2px 8px #c5f7da25;
      margin-top: 12px;
    }
    .fanbox b, .infobox b { color: #13749a; }
    .fanbox .tip { color: #387e48; display: block; margin-top: 10px; }
    @media (max-width: 600px) {
      .container { padding: 11px 2vw 12px 2vw;}
      .season-btn { font-size: 1.09em; padding: 14px 0;}
      .wiz-btn { padding: 12px 0; width: 46vw;}
      .infobox, .fanbox { font-size: 1em; }
    }
  </style>
  <script>
    // Prevent double-tap zoom
    document.addEventListener('touchstart', function preventZoom(e) {
      if (e.touches.length > 1) e.preventDefault();
    }, { passive: false });
    let lastTouch = 0;
    document.addEventListener('touchend', function(e) {
      let now = new Date().getTime();
      if (now - lastTouch <= 300) e.preventDefault();
      lastTouch = now;
    }, false);
  </script>
</head>
<body>
  <div class="container">
    <h1>DVS Easy Setup Wizard (NZ)</h1>
    <div id="main"></div>
  </div>
  <script>
    // Info/explanation per season for why the fan runs etc
    const FAN_INFO = {
      Winter: `<b>Why does the fan run even when roof air is cold?</b><br>
      Your DVS gently moves air even if the roof is colder, helping control moisture and reduce condensation. The settings below keep windows clear, air fresh, and your home healthy all winter.`,
      Summer: `<b>Why does the fan run even if roof is warm?</b><br>
      In summer, DVS circulates fresh air to prevent stuffiness and help manage humidity. The settings below keep your home comfortable and fresh—even on warm days.`
    };

    // Fan speed box: simple, helpful, season-specific, in the exact wording style you want
    const FAN_BOX = {
      Winter: `
        <b>Set fan speed to 3–4 bars.</b><br>
        This keeps enough air moving to stop windows fogging and remove moisture in winter.<br><br>
        <b>How to adjust:</b><br>
        MENU → System → Profiles → Day or Night → Fan Control → Fan Speed<br>
        <span class="tip">
          If windows fog, increase fan speed.<br>
          If home is too cool, reduce fan speed.
        </span>
      `,
      Summer: `
        <b>Set fan speed to 2–3 bars.</b><br>
        This gives gentle airflow to keep your house fresh and not too warm in summer.<br><br>
        <b>How to adjust:</b><br>
        MENU → System → Profiles → Day or Night → Fan Control → Fan Speed<br>
        <span class="tip">
          If house is stuffy, increase fan speed.<br>
          If house is too warm, reduce fan speed.
        </span>
      `
    };

    // Each wizard step as before
    const STEPS = {
      Winter: [
        { title: "Start Day Settings", action: "From the main screen, press MENU. Select 'System'. Press OK. Select 'Profiles'. Press OK.", desc: "" },
        { title: "Day Profile", action: "Select 'Day'. Press OK.", desc: "" },
        { title: "Set Day Temp", action: "Select 'Set Temp'. Press OK. Select 23°C. Press OK.", desc: "" },
        { title: "Open Fan Control", action: "Press MENU to go back. Select 'Fan Control'. Press OK.", desc: "" },
        { title: "Set Day Fan Speed", action: "Select 'Fan Speed'. Press OK. Select 3–4 bars. Press OK.", desc: "" },
        { title: "Set Day Heat Recovery", action: "Press MENU to go back. Select 'Heat Recovery'. Press OK. Select all 7 bars. Press OK.", desc: "" },
        { title: "Set Day Heat Retention", action: "Press MENU to go back. Select 'Heat Retention'. Press OK. Select OFF (0 bars). Press OK.", desc: "" },
        { title: "Finish Day Profile", action: "Press MENU until you see 'Profiles' again.", desc: "Now set Night settings." },
        { title: "Night Profile", action: "Select 'Night'. Press OK.", desc: "" },
        { title: "Set Night Temp", action: "Select 'Set Temp'. Press OK. Select 23°C. Press OK.", desc: "" },
        { title: "Open Night Fan Control", action: "Press MENU to go back. Select 'Fan Control'. Press OK.", desc: "" },
        { title: "Set Night Fan Speed", action: "Select 'Fan Speed'. Press OK. Select 3–4 bars. Press OK.", desc: "" },
        { title: "Set Night Heat Recovery", action: "Press MENU to go back. Select 'Heat Recovery'. Press OK. Select all 7 bars. Press OK.", desc: "" },
        { title: "Set Night Heat Retention", action: "Press MENU to go back. Select 'Heat Retention'. Press OK. Select OFF (0 bars). Press OK.", desc: "" },
        { title: "Finish Night Profile", action: "Press MENU until you see the main screen.", desc: "" },
        { title: "Set Humidity", action: "From the main screen, press MENU. Select 'Hum. Settings'. Press OK. Select 'Sensitivity'. Press OK. Select High (Hi). Press OK.", desc: "" },
        { title: "Set Humidity Time", action: "Select 'Time'. Press OK. Select Instant. Press OK. Press MENU to finish.", summary: [
          "<b>Why these settings?</b>",
          "• Heat Recovery ON: Uses any available roof warmth to help heat the home.",
          "• Heat Retention OFF: Allows more air flow to control winter moisture and condensation.",
          "• Humidity Sensitivity High + Instant: Quickly responds to moisture, stopping damp air from entering.",
          "• Fan Speed 3–4 bars: Moves enough air to keep windows clear without chilling the home.",
          "",
          "If you still notice window fog, increase fan speed slightly.<br><br>This setup keeps your home dry, fresh and healthy all winter."
        ]}
      ],
      Summer: [
        { title: "Start Day Settings", action: "From the main screen, press MENU. Select 'System'. Press OK. Select 'Profiles'. Press OK.", desc: "" },
        { title: "Day Profile", action: "Select 'Day'. Press OK.", desc: "" },
        { title: "Set Day Temp", action: "Select 'Set Temp'. Press OK. Select 19°C. Press OK.", desc: "" },
        { title: "Open Fan Control", action: "Press MENU to go back. Select 'Fan Control'. Press OK.", desc: "" },
        { title: "Set Day Fan Speed", action: "Select 'Fan Speed'. Press OK. Select 2–3 bars. Press OK.", desc: "" },
        { title: "Set Day Heat Recovery", action: "Press MENU to go back. Select 'Heat Recovery'. Press OK. Select OFF (0 bars). Press OK.", desc: "" },
        { title: "Set Day Heat Retention", action: "Press MENU to go back. Select 'Heat Retention'. Press OK. Select OFF (0 bars). Press OK.", desc: "" },
        { title: "Finish Day Profile", action: "Press MENU until you see 'Profiles' again.", desc: "Now set Night settings." },
        { title: "Night Profile", action: "Select 'Night'. Press OK.", desc: "" },
        { title: "Set Night Temp", action: "Select 'Set Temp'. Press OK. Select 19°C. Press OK.", desc: "" },
        { title: "Open Night Fan Control", action: "Press MENU to go back. Select 'Fan Control'. Press OK.", desc: "" },
        { title: "Set Night Fan Speed", action: "Select 'Fan Speed'. Press OK. Select 2–3 bars. Press OK.", desc: "" },
        { title: "Set Night Heat Recovery", action: "Press MENU to go back. Select 'Heat Recovery'. Press OK. Select OFF (0 bars). Press OK.", desc: "" },
        { title: "Set Night Heat Retention", action: "Press MENU to go back. Select 'Heat Retention'. Press OK. Select OFF (0 bars). Press OK.", desc: "" },
        { title: "Finish Night Profile", action: "Press MENU until you see the main screen.", desc: "" },
        { title: "Set Humidity", action: "From the main screen, press MENU. Select 'Hum. Settings'. Press OK. Select 'Sensitivity'. Press OK. Select Medium (Med). Press OK.", desc: "" },
        { title: "Set Humidity Time", action: "Select 'Time'. Press OK. Select 10 min. Press OK. Press MENU to finish.", summary: [
          "<b>Why these settings?</b>",
          "• Heat Recovery OFF: Avoids pulling in hot roof air during summer days.",
          "• Heat Retention OFF: Keeps air flow fresh, not stuffy.",
          "• Humidity Sensitivity Medium (10-min delay): Controls humidity without cycling the fan on/off too often.",
          "• Fan Speed 2–3 bars: Keeps air moving gently without making the house too warm or too cool.",
          "",
          "If house is stuffy, increase fan speed slightly.<br><br>This keeps your home fresh and comfortable in summer."
        ]}
      ]
    };
    const SEASON_META = {
      Winter: { name: "Winter", emoji: "❄️", tip: "Recommended for June–August" },
      Summer: { name: "Summer", emoji: "☀️", tip: "Recommended for December–February" }
    };
    function getNZSeason() {
      const now = new Date();
      let month = now.getUTCMonth() + 1;
      const hour = now.getUTCHours();
      if (hour < 12) {
        if (now.getUTCDate() === new Date(now.getUTCFullYear(), now.getUTCMonth()+1, 0).getDate()) {
          month = (month % 12) + 1;
        }
      }
      if (month === 12 || month === 1 || month === 2) return "Summer";
      if (month >= 6 && month <= 8) return "Winter";
      return "Winter";
    }
    // State
    let selected = getNZSeason();
    let step = 0;
    function render() {
      const main = document.getElementById('main');
      if (step === 0) {
        main.innerHTML = `
          <div class="infobox" id="faninfo">${FAN_INFO[selected]}</div>
          <div class="wizardselect">
            <div style="text-align:center; font-size:1.05em; margin-bottom: 4px;">
              <b>Select the season to set up:</b>
            </div>
            <div class="season-btns">
              <button class="season-btn${selected==="Winter"?" recommended active":""}" onclick="selectSeason('Winter')">❄️ Winter<br><span style='font-size:0.9em; font-weight:400'>June–August</span></button>
              <button class="season-btn${selected==="Summer"?" recommended active":""}" onclick="selectSeason('Summer')">☀️ Summer<br><span style='font-size:0.9em; font-weight:400'>Dec–Feb</span></button>
            </div>
            <button class="wiz-btn" onclick="startWizard()">Start Setup</button>
          </div>
          <div class="fanbox" id="fanbox">${FAN_BOX[selected]}</div>
        `;
      } else {
        const meta = SEASON_META[selected];
        const steps = STEPS[selected];
        const curr = steps[step - 1];
        main.innerHTML = `
          <div class="wizard-step">
            <div class="wizard-title">${meta.emoji} <span>${curr.title}</span></div>
            <div class="wizard-action">${curr.action}</div>
            <div class="wizard-desc">${curr.desc}</div>
            <div class="wizard-nav">
              ${step > 1 ? `<button class="wiz-btn" onclick="prevStep()">Back</button>` : ""}
              ${step < steps.length ? `<button class="wiz-btn" onclick="nextStep()">Next</button>` : `<button class="wiz-btn" onclick="resetWizard()">Finish</button>`}
            </div>
            ${curr.summary ? `<div class="summary"><div class="summary-title">${curr.summary[0]}</div><ul>${curr.summary.slice(1).map(item=>`<li>${item}</li>`).join('')}</ul></div>` : ""}
          </div>
        `;
      }
    }
    // Event functions
    window.selectSeason = function(s) { selected = s; render(); }
    window.startWizard = function() { step = 1; render(); }
    window.nextStep = function() { step += 1; render(); }
    window.prevStep = function() { step -= 1; render(); }
    window.resetWizard = function() { step = 0; render(); }
    render();
  </script>
</body>
</html>